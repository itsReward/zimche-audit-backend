<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      th:replace="~{layout/base :: layout(~{::title}, ~{::section})}">
<head>
    <title>Audits - ZIMCHE Audit</title>
</head>
<body>
<section>
    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h2 class="mb-1">Audit Management</h2>
            <p class="text-muted">Track and manage university audit processes</p>
        </div>
        <div sec:authorize="hasRole('ADMIN')">
            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#newAuditModal">
                <i class="fas fa-plus me-2"></i>Start New Audit
            </button>
        </div>
    </div>

    <!-- Audit Stats -->
    <div class="row mb-4">
        <div class="col-md-2">
            <div class="stats-card">
                <div class="icon blue">
                    <i class="fas fa-clipboard-list"></i>
                </div>
                <h4 class="mb-2">24</h4>
                <p class="text-muted mb-0">Total Audits</p>
            </div>
        </div>
        <div class="col-md-2">
            <div class="stats-card">
                <div class="icon orange">
                    <i class="fas fa-hourglass-half"></i>
                </div>
                <h4 class="mb-2">8</h4>
                <p class="text-muted mb-0">In Progress</p>
            </div>
        </div>
        <div class="col-md-2">
            <div class="stats-card">
                <div class="icon red">
                    <i class="fas fa-clock"></i>
                </div>
                <h4 class="mb-2">3</h4>
                <p class="text-muted mb-0">Overdue</p>
            </div>
        </div>
        <div class="col-md-2">
            <div class="stats-card">
                <div class="icon green">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h4 class="mb-2">11</h4>
                <p class="text-muted mb-0">Completed</p>
            </div>
        </div>
        <div class="col-md-2">
            <div class="stats-card">
                <div class="icon blue">
                    <i class="fas fa-calendar-alt"></i>
                </div>
                <h4 class="mb-2">2</h4>
                <p class="text-muted mb-0">Scheduled</p>
            </div>
        </div>
        <div class="col-md-2">
            <div class="stats-card">
                <div class="icon red">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h4 class="mb-2">0</h4>
                <p class="text-muted mb-0">Failed</p>
            </div>
        </div>
    </div>

    <!-- Filters -->
    <div class="row mb-4">
        <div class="col-md-3">
            <select class="form-select">
                <option value="">All Status</option>
                <option value="scheduled">Scheduled</option>
                <option value="in_progress">In Progress</option>
                <option value="completed">Completed</option>
                <option value="overdue">Overdue</option>
            </select>
        </div>
        <div class="col-md-3">
            <select class="form-select">
                <option value="">All Universities</option>
                <option value="1">University of Zimbabwe</option>
                <option value="2">Midlands State University</option>
                <option value="3">NUST</option>
                <option value="4">Africa University</option>
            </select>
        </div>
        <div class="col-md-3">
            <select class="form-select">
                <option value="">All Types</option>
                <option value="annual">Annual Review</option>
                <option value="program">Program Audit</option>
                <option value="compliance">Compliance Check</option>
                <option value="follow_up">Follow-up Audit</option>
            </select>
        </div>
        <div class="col-md-3">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Search audits...">
                <button class="btn btn-outline-secondary" type="button">
                    <i class="fas fa-search"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Audits List -->
    <div class="row">
        <!-- Audit Card 1 -->
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="stats-card h-100">
                <div class="d-flex justify-content-between align-items-start mb-3">
                    <h6 class="mb-0">Annual Review 2025</h6>
                    <span class="badge badge-pending">In Progress</span>
                </div>

                <div class="mb-3">
                    <div class="d-flex align-items-center mb-2">
                        <div class="avatar me-2" style="width: 30px; height: 30px; font-size: 0.8rem; background-color: var(--primary-orange);">UZ</div>
                        <span class="fw-medium">University of Zimbabwe</span>
                    </div>
                    <p class="text-muted small mb-0">Comprehensive annual institutional review covering all academic and administrative areas.</p>
                </div>

                <div class="mb-3">
                    <div class="d-flex justify-content-between text-sm mb-1">
                        <span>Progress</span>
                        <span>65%</span>
                    </div>
                    <div class="progress" style="height: 6px;">
                        <div class="progress-bar" style="width: 65%; background-color: var(--primary-orange);"></div>
                    </div>
                </div>

                <div class="row text-center mb-3">
                    <div class="col-4">
                        <small class="text-muted d-block">Start Date</small>
                        <span class="fw-medium">Jul 1</span>
                    </div>
                    <div class="col-4">
                        <small class="text-muted d-block">Due Date</small>
                        <span class="fw-medium text-warning">Jul 15</span>
                    </div>
                    <div class="col-4">
                        <small class="text-muted d-block">Reviewer</small>
                        <span class="fw-medium">Dr. Smith</span>
                    </div>
                </div>

                <div class="d-flex gap-2">
                    <a href="/audits/1" class="btn btn-sm btn-primary flex-fill">View Details</a>
                    <button class="btn btn-sm btn-outline-secondary" data-bs-toggle="dropdown">
                        <i class="fas fa-ellipsis-v"></i>
                    </button>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="#"><i class="fas fa-edit me-2"></i>Edit</a>
                        <a class="dropdown-item" href="#"><i class="fas fa-comment me-2"></i>Add Note</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item text-success" href="#"><i class="fas fa-check me-2"></i>Mark Complete</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Audit Card 2 -->
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="stats-card h-100">
                <div class="d-flex justify-content-between align-items-start mb-3">
                    <h6 class="mb-0">Program Accreditation</h6>
                    <span class="badge badge-completed">Completed</span>
                </div>

                <div class="mb-3">
                    <div class="d-flex align-items-center mb-2">
                        <div class="avatar me-2" style="width: 30px; height: 30px; font-size: 0.8rem; background-color: var(--info-blue);">MSU</div>
                        <span class="fw-medium">Midlands State University</span>
                    </div>
                    <p class="text-muted small mb-0">Engineering programs accreditation review for undergraduate and postgraduate degrees.</p>
                </div>

                <div class="mb-3">
                    <div class="d-flex justify-content-between text-sm mb-1">
                        <span>Progress</span>
                        <span>100%</span>
                    </div>
                    <div class="progress" style="height: 6px;">
                        <div class="progress-bar bg-success" style="width: 100%;"></div>
                    </div>
                </div>

                <div class="row text-center mb-3">
                    <div class="col-4">
                        <small class="text-muted d-block">Start Date</small>
                        <span class="fw-medium">Jun 15</span>
                    </div>
                    <div class="col-4">
                        <small class="text-muted d-block">Completed</small>
                        <span class="fw-medium text-success">Jul 5</span>
                    </div>
                    <div class="col-4">
                        <small class="text-muted d-block">Reviewer</small>
                        <span class="fw-medium">Dr. Johnson</span>
                    </div>
                </div>

                <div class="d-flex gap-2">
                    <a href="/audits/2" class="btn btn-sm btn-primary flex-fill">View Report</a>
                    <button class="btn btn-sm btn-outline-secondary" data-bs-toggle="dropdown">
                        <i class="fas fa-ellipsis-v"></i>
                    </button>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="#"><i class="fas fa-download me-2"></i>Download Report</a>
                        <a class="dropdown-item" href="#"><i class="fas fa-share me-2"></i>Share</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Audit Card 3 -->
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="stats-card h-100">
                <div class="d-flex justify-content-between align-items-start mb-3">
                    <h6 class="mb-0">Compliance Review</h6>
                    <span class="badge badge-inactive">Overdue</span>
                </div>

                <div class="mb-3">
                    <div class="d-flex align-items-center mb-2">
                        <div class="avatar me-2" style="width: 30px; height: 30px; font-size: 0.8rem; background-color: var(--warning-yellow); color: var(--dark-gray);">NUST</div>
                        <span class="fw-medium">NUST</span>
                    </div>
                    <p class="text-muted small mb-0">Regulatory compliance review for quality assurance standards and procedures.</p>
                </div>

                <div class="mb-3">
                    <div class="d-flex justify-content-between text-sm mb-1">
                        <span>Progress</span>
                        <span>30%</span>
                    </div>
                    <div class="progress" style="height: 6px;">
                        <div class="progress-bar bg-danger" style="width: 30%;"></div>
                    </div>
                </div>

                <div class="row text-center mb-3">
                    <div class="col-4">
                        <small class="text-muted d-block">Start Date</small>
                        <span class="fw-medium">Jun 20</span>
                    </div>
                    <div class="col-4">
                        <small class="text-muted d-block">Due Date</small>
                        <span class="fw-medium text-danger">Jul 8</span>
                    </div>
                    <div class="col-4">
                        <small class="text-muted d-block">Reviewer</small>
                        <span class="fw-medium">Dr. Brown</span>
                    </div>
                </div>

                <div class="d-flex gap-2">
                    <a href="/audits/3" class="btn btn-sm btn-primary flex-fill">View Details</a>
                    <button class="btn btn-sm btn-outline-secondary" data-bs-toggle="dropdown">
                        <i class="fas fa-ellipsis-v"></i>
                    </button>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="#"><i class="fas fa-edit me-2"></i>Edit</a>
                        <a class="dropdown-item text-warning" href="#"><i class="fas fa-exclamation-triangle me-2"></i>Escalate</a>
                        <a class="dropdown-item text-danger" href="#"><i class="fas fa-pause me-2"></i>Suspend</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Audit Card 4 -->
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="stats-card h-100">
                <div class="d-flex justify-content-between align-items-start mb-3">
                    <h6 class="mb-0">Follow-up Assessment</h6>
                    <span class="badge badge-active">Scheduled</span>
                </div>

                <div class="mb-3">
                    <div class="d-flex align-items-center mb-2">
                        <div class="avatar me-2" style="width: 30px; height: 30px; font-size: 0.8rem; background-color: var(--danger-red);">AU</div>
                        <span class="fw-medium">Africa University</span>
                    </div>
                    <p class="text-muted small mb-0">Follow-up review for previous audit recommendations and implementation status.</p>
                </div>

                <div class="mb-3">
                    <div class="d-flex justify-content-between text-sm mb-1">
                        <span>Progress</span>
                        <span>0%</span>
                    </div>
                    <div class="progress" style="height: 6px;">
                        <div class="progress-bar bg-secondary" style="width: 5%;"></div>
                    </div>
                </div>

                <div class="row text-center mb-3">
                    <div class="col-4">
                        <small class="text-muted d-block">Scheduled</small>
                        <span class="fw-medium">Jul 20</span>
                    </div>
                    <div class="col-4">
                        <small class="text-muted d-block">Due Date</small>
                        <span class="fw-medium">Aug 5</span>
                    </div>
                    <div class="col-4">
                        <small class="text-muted d-block">Reviewer</small>
                        <span class="fw-medium">Dr. Wilson</span>
                    </div>
                </div>

                <div class="d-flex gap-2">
                    <a href="/audits/4" class="btn btn-sm btn-outline-primary flex-fill">View Details</a>
                    <button class="btn btn-sm btn-outline-secondary" data-bs-toggle="dropdown">
                        <i class="fas fa-ellipsis-v"></i>
                    </button>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="#"><i class="fas fa-play me-2"></i>Start Early</a>
                        <a class="dropdown-item" href="#"><i class="fas fa-calendar me-2"></i>Reschedule</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item text-danger" href="#"><i class="fas fa-times me-2"></i>Cancel</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- More audit cards... -->
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="stats-card h-100">
                <div class="d-flex justify-content-between align-items-start mb-3">
                    <h6 class="mb-0">Quality Assurance Review</h6>
                    <span class="badge badge-pending">In Progress</span>
                </div>

                <div class="mb-3">
                    <div class="d-flex align-items-center mb-2">
                        <div class="avatar me-2" style="width: 30px; height: 30px; font-size: 0.8rem; background-color: var(--success-green);">CUT</div>
                        <span class="fw-medium">Chinhoyi University of Technology</span>
                    </div>
                    <p class="text-muted small mb-0">Comprehensive quality assurance review of academic programs and student services.</p>
                </div>

                <div class="mb-3">
                    <div class="d-flex justify-content-between text-sm mb-1">
                        <span>Progress</span>
                        <span>85%</span>
                    </div>
                    <div class="progress" style="height: 6px;">
                        <div class="progress-bar" style="width: 85%; background-color: var(--success-green);"></div>
                    </div>
                </div>

                <div class="row text-center mb-3">
                    <div class="col-4">
                        <small class="text-muted d-block">Start Date</small>
                        <span class="fw-medium">Jun 25</span>
                    </div>
                    <div class="col-4">
                        <small class="text-muted d-block">Due Date</small>
                        <span class="fw-medium">Jul 18</span>
                    </div>
                    <div class="col-4">
                        <small class="text-muted d-block">Reviewer</small>
                        <span class="fw-medium">Dr. Davis</span>
                    </div>
                </div>

                <div class="d-flex gap-2">
                    <a href="/audits/5" class="btn btn-sm btn-primary flex-fill">View Details</a>
                    <button class="btn btn-sm btn-outline-secondary" data-bs-toggle="dropdown">
                        <i class="fas fa-ellipsis-v"></i>
                    </button>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="#"><i class="fas fa-edit me-2"></i>Edit</a>
                        <a class="dropdown-item" href="#"><i class="fas fa-comment me-2"></i>Add Note</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item text-success" href="#"><i class="fas fa-check me-2"></i>Mark Complete</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Pagination -->
    <nav aria-label="Audits pagination">
        <ul class="pagination justify-content-center">
            <li class="page-item disabled">
                <a class="page-link" href="#" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
            <li class="page-item active"><a class="page-link" href="#">1</a></li>
            <li class="page-item"><a class="page-link" href="#">2</a></li>
            <li class="page-item"><a class="page-link" href="#">3</a></li>
            <li class="page-item">
                <a class="page-link" href="#" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
        </ul>
    </nav>
</section>

<!-- New Audit Modal -->
<div class="modal fade" id="newAuditModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Start New Audit</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="auditTitle" class="form-label">Audit Title</label>
                            <input type="text" class="form-control" id="auditTitle" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="auditType" class="form-label">Audit Type</label>
                            <select class="form-select" id="auditType" required>
                                <option value="">Select Type</option>
                                <option value="annual">Annual Review</option>
                                <option value="program">Program Audit</option>
                                <option value="compliance">Compliance Check</option>
                                <option value="follow_up">Follow-up Audit</option>
                            </select>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="auditUniversity" class="form-label">University</label>
                            <select class="form-select" id="auditUniversity" required>
                                <option value="">Select University</option>
                                <option value="1">University of Zimbabwe</option>
                                <option value="2">Midlands State University</option>
                                <option value="3">NUST</option>
                                <option value="4">Africa University</option>
                                <option value="5">Chinhoyi University of Technology</option>
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="auditReviewer" class="form-label">Assigned Reviewer</label>
                            <select class="form-select" id="auditReviewer" required>
                                <option value="">Select Reviewer</option>
                                <option value="1">Dr. Sarah Smith</option>
                                <option value="2">Dr. Michael Johnson</option>
                                <option value="3">Dr. Emily Brown</option>
                                <option value="4">Dr. Robert Wilson</option>
                                <option value="5">Dr. Jennifer Davis</option>
                            </select>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="startDate" class="form-label">Start Date</label>
                            <input type="date" class="form-control" id="startDate" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="dueDate" class="form-label">Due Date</label>
                            <input type="date" class="form-control" id="dueDate" required>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="auditDescription" class="form-label">Description</label>
                        <textarea class="form-control" id="auditDescription" rows="3"></textarea>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Audit Scope</label>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="scopeAcademic">
                                    <label class="form-check-label" for="scopeAcademic">Academic Programs</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="scopeFinancial">
                                    <label class="form-check-label" for="scopeFinancial">Financial Management</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="scopeGovernance">
                                    <label class="form-check-label" for="scopeGovernance">Governance</label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="scopeInfrastructure">
                                    <label class="form-check-label" for="scopeInfrastructure">Infrastructure</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="scopeStudentServices">
                                    <label class="form-check-label" for="scopeStudentServices">Student Services</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="scopeCompliance">
                                    <label class="form-check-label" for="scopeCompliance">Regulatory Compliance</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-check">
                        <input type="checkbox" class="form-check-input" id="notifyStakeholders">
                        <label class="form-check-label" for="notifyStakeholders">
                            Notify university stakeholders about audit commencement
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary">Start Audit</button>
            </div>
        </div>
    </div>
</div>
</body>
</html>